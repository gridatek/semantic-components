/* shadcn/ui inspired typography utilities */
@theme {
  /* Typography colors using shadcn's design tokens */
  --prose-body: hsl(var(--foreground));
  --prose-muted: hsl(var(--muted-foreground));
  --prose-accent: hsl(var(--accent-foreground));
  --prose-border: hsl(var(--border));
  --prose-background: hsl(var(--background));
  --prose-card: hsl(var(--card));
  --prose-muted-bg: hsl(var(--muted));
  --prose-destructive: hsl(var(--destructive));
  --prose-ring: hsl(var(--ring));
}

/* shadcn/ui heading utilities */
@utility h1 {
  @apply scroll-m-20 text-4xl font-extrabold tracking-tight text-balance lg:text-5xl;
}

@utility h2 {
  @apply mt-10 scroll-m-20 border-b pb-2 text-3xl font-semibold tracking-tight first:mt-0;
}

@utility h3 {
  @apply mt-8 scroll-m-20 text-2xl font-semibold tracking-tight;
}

@utility h4 {
  @apply scroll-m-20 text-xl font-semibold tracking-tight;
}

@utility p {
  @apply leading-7 [&:not(:first-child)]:mt-6;
}

@utility blockquote {
  @apply mt-6 border-l-2 pl-6 italic;
}

@utility list {
  @apply my-6 ml-6 [&>li]:mt-2;
}

@utility inline-code {
  @apply relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-sm font-semibold;
}

@utility lead {
  @apply text-xl text-muted-foreground;
}

@utility large {
  @apply text-lg font-semibold;
}

@utility small {
  @apply text-sm font-medium leading-none;
}

@utility muted {
  @apply text-sm text-muted-foreground;
}

/* Modified prose utility for shadcn/ui compatibility */
@utility prose {
  /* shadcn/ui typography styles */
  & h1 {
    @apply scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl mb-2;
  }

  & h2 {
    @apply scroll-m-20 border-b pb-2 text-3xl font-semibold tracking-tight mb-2;
  }

  & h3 {
    @apply scroll-m-20 text-2xl font-semibold tracking-tight mb-2;
  }

  /* Section header h3s - more specific targeting */
  & h3 + h1,
  & h3 + h2,
  & h3 + h3,
  & h3 + h4 {
    margin-top: 0.5rem;
  }

  /* Section headers get more bottom margin and top spacing */
  & h3:first-of-type,
  & p + h3,
  & ul + h3,
  & ol + h3,
  & table + h3,
  & blockquote + h3 {
    @apply mb-4 mt-8;
  }

  /* First h3 shouldn't have top margin */
  & h3:first-of-type {
    @apply mt-0;
  }

  & h4 {
    @apply scroll-m-20 text-xl font-semibold tracking-tight mb-2;
  }

  & h5,
  & h6 {
    @apply font-semibold mt-6 mb-2;
  }

  & p {
    @apply leading-7 [&:not(:first-child)]:mt-6;
  }

  & [data-lead] {
    @apply text-xl text-muted-foreground mt-5 mb-5;
  }

  & .lead {
    @apply text-xl text-muted-foreground mt-5 mb-5;
  }

  & .large {
    @apply text-lg font-semibold;
  }

  & .small {
    @apply text-sm font-medium leading-none;
  }

  & .muted {
    @apply text-sm text-muted-foreground;
  }

  & a {
    @apply font-medium underline underline-offset-4 text-foreground decoration-muted-foreground hover:decoration-foreground;
  }

  & strong {
    @apply font-semibold;
  }

  & em {
    @apply italic;
  }

  & code {
    @apply relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-sm font-semibold;
  }

  & pre {
    @apply overflow-x-auto rounded-lg border bg-muted p-4 mt-4 text-sm leading-7;

    & code {
      @apply bg-transparent border-0 p-0 font-normal text-inherit text-sm font-mono leading-7;
    }
  }

  & kbd {
    @apply inline-flex h-5 max-h-full items-center rounded border bg-muted px-1 font-mono text-[10px] font-medium text-muted-foreground;
  }

  & ul {
    @apply my-6 ml-6 list-disc [&>li]:mt-2;
  }

  & ol {
    @apply my-6 ml-6 list-decimal [&>li]:mt-2;
  }

  & ul ul,
  & ul ol,
  & ol ul,
  & ol ol {
    @apply mt-2 mb-2;
  }

  & li > p {
    @apply mt-4 mb-4;
  }

  & dt {
    @apply font-semibold mt-5;
  }

  & dd {
    @apply mt-2 pl-7 text-muted-foreground;
  }

  & blockquote {
    @apply mt-6 border-l-2 pl-6 italic mb-6;
  }

  & table {
    @apply w-full my-6;
  }

  & thead {
    & tr {
      @apply m-0 border-t p-0 even:bg-muted;
    }

    & th {
      @apply border px-4 py-2 text-left font-bold bg-muted;
    }
  }

  & tbody {
    & tr {
      @apply m-0 border-t p-0;
    }

    & td {
      @apply border px-4 py-2 text-left;
    }
  }

  & img {
    @apply rounded-lg border;
    border-color: var(--prose-border);
    margin-top: 2em;
    margin-bottom: 2em;
  }

  & figure {
    margin-top: 2em;
    margin-bottom: 2em;

    & > * {
      margin-top: 0;
      margin-bottom: 0;
    }
  }

  & figcaption {
    @apply text-sm leading-6;
    color: var(--prose-muted);
    margin-top: 0.8571em;
    text-align: center;
  }

  & video {
    @apply rounded-lg;
    margin-top: 2em;
    margin-bottom: 2em;
  }

  & hr {
    @apply border-border;
    border-top-width: 1px;
    margin-top: 3em;
    margin-bottom: 3em;
  }

  & > :first-child {
    margin-top: 0;
  }

  & > :last-child {
    margin-bottom: 0;
  }
}

/* Utilities */
@utility not-prose {
  & * {
    all: revert;
  }
}
